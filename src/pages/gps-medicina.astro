---
// import statements remain the same
import { Image } from "astro:assets";
import LandingPageLayout from "../layouts/LandingPageLayout.astro";
import TestimonialsSection from "../components/TestimonialsSection.astro";
import StandardCallToAction from "../components/StandardCallToAction.astro";
import FounderSection from "../components/FounderSection.astro";
import FAQSection from "../components/FAQSection.astro";
import HighlightSection from "../components/HighlightSection.astro";
import ForYou from "../components/ForYou.astro";
import IntegrationsSection from "../components/IntegrationsSection.astro";
import LucreLogoNormal from "../../public/logos/lucre+ logo normal.svg";
import Swiper1 from "../components/SwiperComponentLanding1.astro";
import Swiper2 from "../components/SwiperComponentLanding2.astro";
import taxas from "../../public/taxas.webp";
import aprovação from "../../public/aprovação.webp";
import integrações from "../../public/integrações.webp";
import coprodução from "../../public/coprodução.webp";
import destaque from "../../public/destaque.webp";
import ofertas from "../../public/ofertas.webp";
import FormLanding from "../components/FormLanding.astro";
---

<LandingPageLayout title="Lucre+ Landing Page">
  <script type="application/ld+json" slot="head">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Lucre+ Landing Page",
      "url": "https://lucre.com/landing-page",
      "description": "Descubra como passar em Medicina em menos de um ano."
    }
  </script>
  <Fragment slot="header"></Fragment>
  <Fragment slot="footer"></Fragment>
  <main>

    <section class="landing-hero-section">
      <h1><p> </p>Descubra como passar em Medicina em menos de um ano</h1>
      <!-- VIDEO PLACEHOLDER REMOVED -->

    <!-- VSL CONTENT IS NOW VISIBLE BY DEFAULT -->
  
  </main>
</LandingPageLayout>

<style is:global>
  /* Existing styles remain the same, except potentially the video-related ones
     which could be removed for cleanliness, but aren't strictly necessary */
  body {
    background-color: var(--color-background);
    color: var(--color-text);
  }
  main {
    overflow: clip;
  }
  .landing-logo-section {
    display: flex;
    justify-content: center;
    padding: var(--space-l);
    background-color: var(--color-background);
  }

  .landing-hero-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 0 var(--space-xxl) 8cqb;
    gap: var(--space-l);
  }

  .landing-hero-section h1 {
    font-size: max(2.5em, 4cqw);
    color: var(--color-text);
    margin-bottom: 0;
  }

  /* .video-placeholder styles removed */

  /* .unmute-overlay styles removed */

  /* .video-placeholder video styles removed */

  .button {
    width: 100%;
    display: flex;
    justify-content: center;
    margin-top: var(--space-l);
  }
  .button button.primary {
    background-color: var(--color-button-background);
    color: var(--color-button-text);
    padding: var(--space-s) var(--space-m);
    font-size: var(--space-s);
    border-radius: 1.4cqb;
    cursor: pointer;
  }

  .landing-feature-blocks-section {
    padding: var(--space-xxl);
  }
  .needs-section {
    display: flex;
    gap: var(--space-m);
    padding: var(--space-xxl);
    background-color: hsla(228, 12%, 10%, 1);
    flex-direction: row;
    text-align: left;
    align-items: flex-start;
  }
  .needs-content-left {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-m);
    max-width: 50cqw;
    position: sticky;
    top: 0;
    align-self: flex-start;
    height: 100vh;
    justify-content: center;
  }
  .needs-content-right {
    max-width: 50vw;
    padding: 0;
  }
  .needs-content-left h1 {
    font-size: max(2.5em, 4cqw);
    color: var(--color-text);
    margin-bottom: 0;
  }
  .needs-content-left p {
    font-size: max(1.1em, 1.5cqw);
    color: var(--color-text);
    line-height: var(--line-height-base);
  }
  .landing-footer {
    background-color: var(--color-background);
    color: var(--color-text);
    text-align: center;
    padding: var(--space-l);
    border-top: 1px solid var(--color-background);
  }
  @media (max-width: 960px) {
    .landing-feature-blocks-section {
      padding: 8cqb 0;
    }
    .needs-section {
      flex-direction: column;
      padding: 0cqb;
    }
    .needs-content-left {
      position: static;
      height: auto;
      max-width: 100%;
      padding: 8cqb var(--space-xxl);
    }
    .needs-content-right {
      max-width: 100vw;
      padding: 0 0 8cqb 0;
    }
    /* .video-placeholder media query styles removed */
    .button button.primary {
      font-size: clamp(1rem, 3cqi, 1.2rem);
      width: 80cqw;
    }
  }
  /* .video-placeholder.controls-active styles removed */
  /* .video-controls styles removed */
  /* .video-controls button styles removed */
  /* .progress-bar styles removed */
  /* .progress styles removed */
</style>

<!-- Simplified Script -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Since the video is removed, we consider the content as "immediately shown"
    // and trigger the initialization logic that would normally happen after the video.

    // Function to initialize modals and potentially other components
    function initializeContent() {
      const vslContent = document.getElementById("vsl-content");
      if (!vslContent) return;

      // --- Modal Handling ---
      function handleButtonClick(e) {
        e.preventDefault();
        const formModal = document.getElementById("form-modal");
        if (!formModal) return;
        formModal.style.display = "flex";

        // Ensure modal close listeners are attached only once
        if (!formModal.dataset.modalInit) {
          formModal.addEventListener("click", function (ev) {
            if (ev.target === formModal) formModal.style.display = "none";
          });
          window.addEventListener("keydown", function (ev) {
            if (ev.key === "Escape") formModal.style.display = "none";
          });
          formModal.dataset.modalInit = "true";
        }
      }

      // Attach event listeners to primary buttons within the content
      const buttons = vslContent.querySelectorAll("button.primary");
      buttons.forEach(function (btn) {
        if (btn.closest("form")) {
          return;
        }
        if (!btn.dataset.primaryInit) {
          // Prevent duplicate listeners
          btn.addEventListener("click", handleButtonClick);
          btn.dataset.primaryInit = "true";
        }
      });
      // --- End Modal Handling ---

      // --- Notify other components (like Testimonials) ---
      // Dispatch the same event that the original script used
      const event = new CustomEvent("vsl-content-visible");
      document.dispatchEvent(event);

      // If there's a global initializer for testimonials/carousels, call it
      // This maintains compatibility with existing component logic
      try {
        if (typeof window.initTestimonials === "function") {
          window.initTestimonials();
        }
      } catch (err) {
        console.warn("initTestimonials threw:", err);
      }
      // --- End Notification ---
    }

    // Run initialization immediately since content is visible
    initializeContent();
  });
</script>